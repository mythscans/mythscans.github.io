<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><!--  JQUERY  -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
  </script>
  <link rel="stylesheet" href="/global.css">
  <title></title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
</head>
<body>
  <div class="header"><a href="https://mythscans.github.io/"><img src="/mythslogo.png" style="height: 97%;filter: drop-shadow(0px 0px 3px black);"></img><a></div>
  <div id="shadowheader" style="height: 85px;"></div>
  <div id="outputdiv" class="seriesinfo" style="width: 100%;margin-top:250px"></div>
  <script>
      function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
      }
      function getseries() {
          $.getJSON('series-config.json', function(result) {
              if(window.location.search.includes("next")) {
                //next+20-1
                ndata = window.location.search.split("?").join("").split("+")
                if(result.chapterlist.indexOf(ndata[1]) != result.chapterlist.length - 1){
                  window.location=result.chapterlist[result.chapterlist.indexOf(ndata[1]) + 1]
                }
              }
              if(window.location.search.includes("last")) {
                //last+20-1
                ndata = window.location.search.split("?").join("").split("+")
                if(result.chapterlist.indexOf(ndata[1]) != 0){
                  window.location=result.chapterlist[result.chapterlist.indexOf(ndata[1]) - 1]
                }
              }
              document.getElementById("outputdiv").innerHTML = document.getElementById("outputdiv").innerHTML + `<img src="/images/${result.name}.jpg" style="z-index:-4;position:fixed;width:100%;top:0px;filter:brightness(0.5);left:0px;">`
              document.getElementById("outputdiv").innerHTML = document.getElementById("outputdiv").innerHTML + `<p style="font-size:80px;margin:auto;text-align:center; position: absolute; top: 95px">${result.name.split("&s&").join(" ")}</p>`
              document.getElementById("outputdiv").innerHTML = document.getElementById("outputdiv").innerHTML + `<div class="seriesdescription" id="test" >Description:<p style="border-top:1px solid white;margin-top:5px">${result.description}</p><p style="margin-bottom:0px;border-bottom:1px solid white">Chapters:</p></div>` + "<br>"
              for(var i = 0; i < result.chapterlist.length; i++) {
                document.getElementById("test").innerHTML = document.getElementById("test").innerHTML + `<a href="${result.chapterlist[i]}?${i==0?"+"+(i==result.chapterlist.length-1?"":result.chapterlist[i+1]):result.chapterlist[i-1]+"+"+(i==result.chapterlist.length-1?"":result.chapterlist[i+1])}" class="chapternumber">${result.chapterlist[i]}</a><br>`
              }
                
          });
      }
      getseries();
  </script>
</body>
